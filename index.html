<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>dalima Ê≥®Êñá„Ç´„Ç¶„É≥„Çø„Éº</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background:#f7f7f7;
  padding:16px;
}
details {
  background:#fff;
  border-radius:10px;
  margin-bottom:10px;
  padding:10px;
}
summary {
  font-weight:bold;
  font-size:18px;
}
.item {
  padding:8px 0;
  border-bottom:1px solid #eee;
}
.sub {
  font-size:14px;
  color:#666;
}
button {
  font-size:18px;
  padding:4px 10px;
  margin:0 6px;
}
.count {
  font-weight:bold;
  margin-left:4px;
}
</style>
</head>
<body>

<h1>üç¥ dalima Ê≥®Êñá„Ç´„Ç¶„É≥„Çø„Éº</h1>
<div id="app"></div>

<script>
const menu = [
  ["„Éâ„É™„É≥„ÇØ„É°„Éã„É•„Éº","„Éì„Éº„É´","Áîü","„Ç∂„Éª„Éó„É¨„Éü„Ç¢„É†„Éª„É¢„É´„ÉÑ","¬•499"],
  ["„Éâ„É™„É≥„ÇØ„É°„Éã„É•„Éº","„Éì„Éº„É´","Áîü","„Ç´„É¨„Éº„Çª„ÉÉ„Éà„Å´ËøΩÂä†„ÅÆÁîü„Éì„Éº„É´","¬•300"],
  ["„Éâ„É™„É≥„ÇØ„É°„Éã„É•„Éº","„Éì„Éº„É´","„Éú„Éà„É´","„Ç≠„É™„É≥„É©„Ç¨„Éº","¬•600"],
  ["„Éâ„É™„É≥„ÇØ„É°„Éã„É•„Éº","„Éì„Éº„É´","„Éú„Éà„É´","„Çµ„ÉÉ„Éù„É≠„Ç®„Éì„Çπ","¬•600"],
  ["„Ç´„É¨„Éº","„ÉÅ„Ç≠„É≥„Ç´„É¨„Éº","","„Éê„Çø„Éº„ÉÅ„Ç≠„É≥„Ç´„É¨„Éº","¬•880"],
  ["„Ç´„É¨„Éº","„ÉÅ„Ç≠„É≥„Ç´„É¨„Éº","","„ÉÅ„Ç≠„É≥„Ç´„É¨„Éº","¬•850"],
  ["„Éä„É≥","","","„Éó„É¨„Éº„É≥„Éä„É≥","¬•250"],
  ["„Éä„É≥","","","„ÉÅ„Éº„Ç∫„Éä„É≥","¬•500"]
];

// „Ç∞„É´„Éº„ÉóÂåñ
const tree = {};
menu.forEach(([big, mid, small, name, price]) => {
  tree[big] ??= {};
  tree[big][mid] ??= {};
  tree[big][mid][small] ??= [];
  tree[big][mid][small].push({name, price});
});

const app = document.getElementById("app");

Object.entries(tree).forEach(([big, mids]) => {
  const bigD = document.createElement("details");
  bigD.innerHTML = `<summary>${big}</summary>`;

  Object.entries(mids).forEach(([mid, smalls]) => {
    const midD = document.createElement("details");
    midD.innerHTML = `<summary>${mid || "„Åù„ÅÆ‰ªñ"}</summary>`;

    Object.entries(smalls).forEach(([small, items]) => {
      if (small) {
        const p = document.createElement("div");
        p.className="sub";
        p.textContent = small;
        midD.appendChild(p);
      }

      items.forEach(item => {
        const key = item.name;
        let cnt = Number(localStorage.getItem(key)) || 0;

        const div = document.createElement("div");
        div.className="item";
        div.innerHTML = `
          <button>Ôºã</button>
          <span>${item.name} ${item.price}</span>
          <span class="count">${cnt}</span>
          <button>Ôºç</button>
        `;

        const [plus, , countEl, minus] = div.children;

        plus.onclick = () => {
          cnt++;
          countEl.textContent = cnt;
          localStorage.setItem(key,cnt);
        };
        minus.onclick = () => {
          if (cnt>0) cnt--;
          countEl.textContent = cnt;
          localStorage.setItem(key,cnt);
        };

        midD.appendChild(div);
      });
    });

    bigD.appendChild(midD);
  });

  app.appendChild(bigD);
});
</script>

</body>
</html>
